<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>History â€“ Jira Quick Finder</title>
  <link rel="stylesheet" href="../css/variables.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components/buttons.css">
  <link rel="stylesheet" href="../css/components/inputs.css">
  <link rel="stylesheet" href="../css/components/cards.css">
  <link rel="stylesheet" href="../css/components/header.css">
  <link rel="stylesheet" href="../css/components/alerts.css">
  <link rel="stylesheet" href="../css/pages/history.css" />
  <script src="/src/js/theme.js"></script>
</head>

<body>
  <div class="page">
    <header class="hero">
      <div class="hero-overlay">
        <h1 class="hero-title">Search History</h1>
        <p class="hero-subtitle">Your last 20 unique Jira issues searched.</p>
      </div>
    </header>

    <main class="container container--options card">
      <div class="popup-header" style="margin-bottom: 8px;">
        <div class="brand">
          <img src="../icons/icon32.png" alt="Jira Quick Finder" />
          <h6 class="title">History</h6>
        </div>
        <button class="close" id="btnCloseTab" title="Close Tab">âœ•</button>
      </div>

      <!-- Cabecera visible solo una vez -->
      <div class="hist-header">
        <span>Issue</span>
        <span>Title</span>
        <span class="right">Last accessed</span>
      </div>

      <div id="historyList" class="hist-list"></div>

      <div class="toolbar">
        <button id="btnExport" class="btn"><span class="icon">â¬‡ï¸</span> Export CSV</button>
        <button id="btnClearAll" class="btn secondary"><span class="icon">ğŸ§¹</span> Clear all</button>
        <p id="lifetimeInfo"></p>
      </div>

      <div id="saveMessage" class="save-message"></div>
    </main>

    <footer class="footer">
      <span>Jira Quick Finder</span>
      <span class="dot">â€¢</span>
      <span id="versionFooter"></span>
    </footer>

    <!-- Template de filas -->
    <template id="tplRow">
      <div class="hist-row-wrapper">
        <div class="hist-row">
          <button class="btn-pin" title="Pin this item" aria-label="Pin">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 5c0 .55-.45 1-1 1h-1v8l2 2v1H8v-1l2-2V6H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1z" />
            </svg>
          </button>
          <a class="hist-key" target="_blank" rel="noreferrer noopener"></a>
          <span class="hist-title"></span>
          <span class="hist-date"></span>
          <div class="actions">
            <button class="btn-alarm" title="Set alarm">â°</button>
            <button class="btn-note" title="Add note">ğŸ“</button>
            <button class="btn-delete" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>
        <div class="note-container hidden">
          <textarea class="note-input" placeholder="Add a note..."></textarea>
        </div>
        <div class="alarm-container hidden">
          <div class="alarm-row">
            <label>Time:</label>
            <input type="datetime-local" class="alarm-date" />
          </div>
          <div class="alarm-row">
            <label>Repeats:</label>
            <input type="number" class="alarm-repeats" value="3" min="1" max="10" />
            <span class="optional-text">(1 min interval)</span>
          </div>
          <div class="alarm-actions">
            <button class="btn-save-alarm btn">Set Alarm</button>
            <button class="btn-cancel-alarm btn secondary">Cancel</button>
          </div>
        </div>
      </div>
    </template>

    <script src="../js/history/index.js"></script>
</body>

</html>